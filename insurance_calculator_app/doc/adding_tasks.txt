step_132
-------------------------------------------------------------

Ментор предложил вам следующий план реализации
расчёта премии для риска Отмена поездки:

Задача 1: реализация TravelCostCoefficient.

TravelCostCoefficient - рассчитывается по следующей схеме:
Стоимость поездки: 0 - 5000 евро -> TravelCostCoefficient = 10 евро
Стоимость поездки: 5000 - 10000 евро -> TravelCostCoefficient = 30 евро
Стоимость поездки: 10000 - 20000 евро -> TravelCostCoefficient = 100 евро
Стоимость поездки: 20000 и более евро -> TravelCostCoefficient = 500 евро.


Задача 2: реализация AgeCoefficient.

AgeCoefficient - возраст путешественника в целых годах
на момент начала поездки.
Возраст 0 - 9 лет -> AgeCoefficient = 5 евро
Возраст 10 - 17 лет -> AgeCoefficient = 10 евро
Возраст 18 - 39 лет -> AgeCoefficient = 20 евро
Возраст 40 - 64 лет -> AgeCoefficient = 30 евро
Возраст 65 и далее лет -> AgeCoefficient = 50 евро.


Задача 3: реализация CountrySafetyRatingCoefficient.

CountrySafetyRatingCoefficient - рейтинг безопасности
страны в которую едет путешественник (допустимые значения 0 - 10,
чем значение выше тем безопаснее страна).
Этот рейтинг может быть задан в базе данных следующим образом:
LATVIA - 5
SPAIN - 8
JAPAN - 9
CountrySafetyRatingCoefficient = стоимость путешествия / рейтинг безопасности страны.


Задача 4: реализация самой формулы расчёта.

Формула расчёта премии для риска Отмена поездки для одного
путешественника может выглядеть так:
TRAVEL_CANCELLATION premium =
TravelCostCoefficient + AgeCoefficient + CountrySafetyRatingCoefficient


Задача 5: реализация REST части (новые параметры запроса, маппинг).


Задача 6: реализация UI части (новые параметры запроса, маппинг).


Задача : Добавить свойство cancellation.risk.enabled в application.properties.
Свойство принимает два значения:
true - функциональность выбора риска отмена путешествия включена;
false - функциональность выключена.


Задача : Создать валидацию, если medical.risk.limit.level.enabled=false
то в запросе в поле списка выбранных рисков не может присутствовать
риск отмены поездки.


Задача 7: создание acceptance тестов.

степы с новыми задачами вставить после 141 степа

---------------------------------------------------------------------

step_147 конец работы по улучшению структуры acceptance тестов
после него (новый 148):

----------------------------------------------------------------------
Ваша следующая задача: протестировать работу приложения при различных
значениях созданного флага cancellation.risk.enabled

для этого будем использовать Spring profiles

шаг 1: добавте файлы
application-cancellation_risk_enabled.properties
application-cancellation_risk_not_enabled.properties
и пропишите в них свойство с соответствующим значением

шаг 2: создайте классы-наследники от TravelCalculatePremiumControllerV1Test
в пакете rest/v1/risks (аналогично для v2):
в одном напишите тест кейс для проверки результата работы приложения,
когда функциональность включена, в другом - когда выключена.

задание:
Вам нужно найти анотацию для созданных классов,
которая будет указывать на основе какого
профиля работают тесты классов.
Проверьте правильность работы приложения.

P.S. подумать есть ли ещё что-то что не покрывают
написанные acceptance тесты и при необходимости
добавте недостающие.

подсказка: ранее в проекте уже внедрялись другие флаги-переключатели
